# 游戏规则

## 1. 游戏流程

游戏人数为`4`人或`6`人，均分成`楚`、`汉`两队。`卡牌`分成`角色卡`和`资质卡`两种, 其中`角色卡`有 8 张, `资质卡`有`28`种`66`张。玩家通过进行`建设`: 花费相应的`金币`，将`手牌`中的`资质卡`建设明牌置于面前的`建设区`建成`建筑`, 并获得相应的效果。最终以`建筑`分数最高的队伍为胜。

游戏开始时, 每人获得`2`个`金币`, 并且可以在`2`张资质卡中`二选一`纳入手牌，作为`初始资源`。并由系统随机指定`皇冠`位置。

游戏分为若干`轮`, 每一`轮`首先各个玩家从`皇冠`位置开始`顺时针`依次选择`角色卡`, 然后以`角色编号`为顺序执行玩家行动回合。玩家在行动回合中，玩家首先决定是否使用`角色主动技能`，然后能以任意顺序`获取资源`、`进行建设或`者使用`建筑主动功能`。对于`获取资源`，每个回合限一次，可以在`拿钱`和`摸牌`中`二选一`。拿钱是指获取`2`金，摸牌是指从`2`张`资质卡`中`二选一`纳入手牌。`建设`也是通常每回合限一次(`建筑师`除外)。

当有人建满`8`个建筑时，执行完当前轮之后游戏结束。

## 2. 角色卡

角色卡总共有 `8` 张。

1. `刺客`
   - [主动] 公开选择一个`角色`（不能选`自己`，也不能不选）进行`暗杀`, 使对应的玩家跳过行动回合。
2. `小偷`
   - [主动] 选择一个`角色`(不能选`自己`、`1`号`刺客`、`刺客的暗杀目标`，也不能不选)，令其在行动回合开始前, 将所有的`金币`给自己。
3. `魔术师`
   - [主动] 在`互换`和`制衡`中二选一。
     - `互换`: 自己和场上另外一名玩家, 互换手牌。
     - `制衡`: 弃掉任意张手牌，然后从牌堆中摸同样数量的牌。
4. `国王`
   - [被动] 下一轮将皇冠移动到自己面前。
   - [被动] 收租(黄)
5. `主教`
   - [被动] 建筑不能被拆
   - [被动] 收租(蓝)
6. `商人`
   - [被动] 收租(绿)
   - [被动] 回合开始时获得`1`金
7. `建筑师`
   - [被动] 回合开始时获得`2`牌
   - [被动] 每回合最多可以进行`3`次建设
8. `军阀`
   - [被动] 收租(红)
   - [主动] 可以少花 1 金，拆掉别人的建筑。
     - 不能拆建满`8`个建筑的人，也不能拆`主教`（无论`主教`是否被刺），更不能拆`自己`

其中，`收租(黄)`表示, 如果玩家选择`拿钱`，则每个建成的`黄`色建筑会额外给玩家`1`金。`收租(蓝)`、`收租(红)`、`收租(绿)`、`收租(紫)`类似。

## 3. 资质卡

资质卡有`28`种`66`张, 分成`黄`、`蓝`、`红`、`绿`、`紫`五种颜色。名称相同的牌不可以重复建设。
除了`紫`色的牌，`黄`、`蓝`、`红`、`绿`只是收租可以有额外的收益。

| 名称   | 颜色 | 费用 | 数量 |
| ------ | ---- | ---- | ---- |
| 酒馆   | 绿   | 1    | 5    |
| 贸易站 | 绿   | 2    | 3    |
| 市场   | 绿   | 2    | 4    |
| 码头   | 绿   | 3    | 3    |
| 海港   | 绿   | 4    | 3    |
| 市政厅 | 绿   | 5    | 2    |
| 庄园   | 黄   | 3    | 5    |
| 城堡   | 黄   | 4    | 4    |
| 皇宫   | 黄   | 5    | 3    |
| 神殿   | 蓝   | 1    | 3    |
| 教堂   | 蓝   | 2    | 3    |
| 修道院 | 蓝   | 3    | 3    |
| 大教堂 | 蓝   | 5    | 2    |
| 瞭望台 | 红   | 1    | 3    |
| 监狱   | 红   | 2    | 3    |
| 战场   | 红   | 3    | 3    |
| 堡垒   | 红   | 5    | 2    |

紫色的牌还有额外的功能

| 名称     | 颜色 | 数量 | 技能
| -------- | ---- | ---- | ----
| 鬼城     | 紫   | 2    | 1    | [被动] 结束算分时可视为任何色, 但如果是最终轮刚好建成则只能视为紫色
| 要塞     | 紫   | 3    | 2    | [被动] 本建筑不能被拆
| 天文台   | 紫   | 5    | 1    | [被动] 可以三选一牌
| 铁匠铺   | 紫   | 5    | 1    | [主动] 可以 2 金买 3 牌, 每回合限一次
| 实验室   | 紫   | 5    | 1    | [主动] 可以卖 1 牌得 1 金，每回合限一次
| 墓地     | 紫   | 5    | 1    | [被动] 可以花 1 金买军阀拆的牌(自己是军阀则不可用)
| 魔法学院 | 紫   | 6    | 1    | [被动] 收租可以算任意色
| 图书馆   | 紫   | 6    | 1    | [被动] 可以 2 选 2 牌
| 城墙     | 紫   | 6    | 1    | [被动] 其他建筑被拆的时候需要+1 金
| 龙门     | 紫   | 6    | 1    | [被动] 最终结算额外+2 分
| 大学     | 紫   | 6    | 1    | [被动] 最终结算额外+2 分


## 4. 计分规则

对于每个玩家，计算建成的建筑的分数之和。
- `5`个颜色都有`+3`分
- 满`8`个建筑`+2`分
- 第一个`8`个建筑的人`+2`分
- `龙门`/`大学`根据被动功能，每个`+2`分
两个队伍的玩家分数分别相加。分数高的队伍获胜。如果分数相同则为`平局`。

## 5. 选择角色规则

对于6人游戏, 先由系统随机弃掉1张角色卡，拿给皇冠玩家暗中进行7选1，然后由皇冠的下家进行暗中6选1，以此类推，直到皇冠的上家进行2选1，并且暗中弃掉最后1张角色卡。

对于4人游戏，先由系统随机公开弃掉2张角色卡，再由系统随机暗中弃掉1张角色卡，然后拿给皇冠玩家暗中进行5选1，然后由皇冠的下家进行暗中4选1，以此类推，直到皇冠的上家进行2选1，并且暗中弃掉最后1张角色卡。

## 6. clarifications

- 如果`国王`未被玩家选中，也就是被弃掉，则下一轮`皇冠`不动。即使国王被刺，下轮皇冠也移到`国王`面前。
- 建满了`8`个建筑之后，不可以再建第`9`个。


## 7. 详细流程

- 游戏准备
  - 将`资质卡`洗匀
  - 对于每个人, 发放2金和二选一的初始资源
  - 系统随机`皇冠`的初始位置
- 进行游戏的每一轮，直到有人建设达到8个建筑。
  - 选择角色
    - 将角色卡洗匀
    - 如果是4人游戏，名牌弃掉2张角色卡
    - 暗中弃掉1张角色卡
    - 皇冠玩家选择角色
    - 皇冠下家选择角色
    - ...
    - 皇冠上家选择角色
  - 依次执行玩家回合
    - 执行玩家被动技能
      - 如果玩家是国王，则立即将皇冠移动到自己面前。
    - 结算玩家延时debuff
      - 如果玩家被刺客暗杀，则立即结束玩家当前回合。
      - 如果玩家被偷，则立即把所有金币转给小偷。
    - 玩家主动技能
      - 如果玩家是`刺客`，需要选择一个其他角色。
      - 如果玩家是小偷，需要选择一个除自己、刺客、被暗杀目标。
      - 如果玩家是`魔术师`，需要在`互换`、`制衡`、`放弃`三选一
        - 如果选择`互换`，则在选择除自己外的一名玩家，互换自己和这名玩家的所有手牌
        - 如果选择`制衡`，则在选择任意张手牌弃掉，然后从牌堆中摸同样数量的牌
        - 注意: 如果玩家没有牌，则不显示`制衡`选项
      - 如果玩家是`商人`，则自动发动: 拿`1`金。
      - 如果玩家师`建筑师`, 则自动发动: 拿`2`牌。
      - 如果玩家是`军阀`，则询问是否`拆除`别人`建筑`。
        - 如果选择`拆除`，则提示玩家选择哪个玩家，注意不可以选自己、主教和8个建筑的人。
        - 如果有玩家建筑被拆，且墓地拥有者不是军阀，且墓地拥有者有金，则询问墓地拥有者是否花钱买牌。
    - 玩家以任意顺序执行获取资源、进行建设或者使用建筑主动功能, 具体每个动作是否显示、是否置灰如下:
      - |3选1|玩家有天文台|未获取过资源||
      - |2选2|玩家有图书馆|未获取过资源||
      - |2选1|玩家没有天文台、没有图书馆|未获取过资源||
      - |拿钱|永远|未获取过资源||
      - |建设(N)|永远|N≥1|每次建设后N-1。对于普通玩家，N初始化为1。对于建筑师，N初始化为min(3, 8-现有建筑数)|
      - |买牌|玩家有铁匠铺|尚未买过牌||
      - |卖牌|玩家有实验室|尚未卖过牌||
  - 如果有玩家建满`8`个建筑，则本轮为最后一轮，结束游戏进入结算阶段。
- 游戏结算
  - 对于每个玩家，计算建成的建筑的分数之和。
    - `5`个颜色都有`+3`分
    - `8`个建筑`+2`分
    - 第一个8个建筑的人+2分
    - 龙门/大学根据被动功能，每个+2分
  - 两个队伍的玩家分数分别相加。分数高的队伍获胜。
